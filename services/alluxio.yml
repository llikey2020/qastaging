Alluxio helm pull:
  extends:
    - .helm-downloader
  variables:
    PACKAGE_NAME: alluxio-helm-chart
    FILE_NAME: alluxio-0.6.22.tgz
    PACKAGE_VERSION: "0.6.22"
    CHART_DIR: alluxio
    ID: 53

Alluxio helm install:
  extends:
    - .helm-installer
  needs:
    - Alluxio helm pull
  variables:
    SERVICE_NAME: alluxio
    CHART_DIR: alluxio
  before_script:
    - |
      cat << EOF > ${VALUES_FILE}
        properties:
          alluxio.master.mount.table.root.ufs: ${ALLUXIO_UFS}
          alluxio.master.mount.table.root.option.aws.accessKeyId: ${AWS_ACCESS_KEY_ID}
          alluxio.master.mount.table.root.option.aws.secretKey: ${AWS_SECRET_ACCESS_KEY}
          alluxio.underfs.s3.default.mode: 777
          alluxio.underfs.s3.inherit.acl: false
          alluxio.security.authentication.type: NOSASL
          alluxio.security.authorization.permission.enabled: false
        journal:
          format:
            runFormat: "true"
          type: UFS
          ufsType: local
          folder: /journal
          size: 1Gi
          volumeType: emptyDir
          medium: ""
        master:
          count: 1
        shortCircuit:
          enabled: false
        tieredstore:
          levels:
            - level: 0
              alias: SSD
              mediumtype: SSD
              path: /ssd
              name: alluxio-ssd
              quota: ${CACHE_SSD_SIZE}
              type: emptyDir
      EOF
